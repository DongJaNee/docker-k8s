## 쿠버네티스 컴포넌트 
쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 **node**라고 하는 워커 머신의 집합. 모든 클러스터는 최소 한 개의 워커 노드를 가진다.

워커 노드는 애플리케이션의 구성요소인 **pod**를 호스트한다. **Control Plane**은 워커 노드와 클러스터 내 **pod**를 관리한다. 
프로덕션 환경에서는 일반적으로 **Control Plane**이 여러 컴퓨터에 걸쳐 실행되고, 클러스터는 일반적으로 여러 **node**를 실행하므로 내결함성과 고가용성이 제공된다.

<img width="928" height="435" alt="image" src="https://github.com/user-attachments/assets/c5ccd4b9-689f-4d57-a918-ec8cd6a4268f" />

## Control Plane Component
**Control Plane Component**는 클러스터 내 어떠한 머신에서든 동작할 수 있다. 그러나 간결성을 위하여, 구성 스크립트는 보통 동일 머신 상에 모든 **Control Plane Component**를 구동시키고, 사용자 컨테이너는 해당 머신 상에 동작시키지 않는다.
여러 머신에서 실행되는 **Control Plane**설정의 예제를 보려면 kubeadm을 사용하여 고가용성 클러스터 만들기를 확인해본다.

### Kube-apiserver
API 서버는 쿠버네티스 API를 노출하는 쿠버네티스 Control Plane Component이다. 
API 서버는 쿠버네티스 Control Plane의 프론트 엔드이다. 

쿠버네티스 API 서버의 주요 구현은 **kube-apiserver**이다. kube-apiserver는 수평으로 확장되도록 디자인되었다.
즉, 더 많은 인스턴스를 배포해서 확장할 수 있다. 
여러 kube-apiserver 인스턴스를 실행하고, 인스턴스간 트래픽을 균형있게 조절 가능
주요 역할 : **클러스터 상태 관리**, **API 제공**, **요청 처리**, **인증 및 인가**, **컨트롤 플레임의 핵심**

### etcd
모든 클러스터 데이터를 담는 쿠버네티스 뒷단의 저장소로 사용되는 일관성, 고가용성 key값 저장소
분산 시스템의 설정, 상태 및 메타데이터를 저장하는 오픈소스 분산 key값 저장소
주요 역할 : **분산 키-값 저장소**, **Kubernetes의 핵심**, **일관성 및 고가용성**, **빠른 읽기/쓰기**

### kube-scheduler
쿠버네티스 클러스터 내에서 새로 생성된 Pod를 적절한 Node에 할당하는 핵심 컴포넌트
kubelet이 해당 node에서 pod를 실행할 수 있도록 연결하는 역할 
주요 역할 : **파드 스케줄링**, **노드 선택**, **필터링**, **스코어링**, **바인딩**

### kube-controller-manager
여러 **Controller**를 하나로 묶어 관리하는 단일 프로세스
이 프로세스는 클러스터의 현재 상태를 지속적으로 모니터링하고, 정의,의도된 상태를 유지하기 위해 필요한 경우 자동으로 작업을 수행하여 클러스터의 정상적인 상태 유지
주요 역할 : **상태 감지 및 복구**, **자율적인 관리**, **중앙 집중식 관리**

### cloud controller manager
쿠버네티스 클러스터와 특정 클라우드 공급자 간의 통합을 담당하는 쿠버네티스 컨트롤 플레인 컴포넌트

노드 컨트롤러: 노드가 응답을 멈춘 후 클라우드 상에서 삭제되었는지 판별하기 위해 클라우드 제공 사업자에게 확인하는 것
라우트 컨트롤러: 기본 클라우드 인프라에 경로를 구성하는 것
서비스 컨트롤러: 클라우드 제공 사업자 로드밸런서를 생성, 업데이트 그리고 삭제하는 것

주요 역할 : **클라우드 종속 로직 분리**, **클라우드 통합 브리지**, **플러그인 기반 아키텍처**

## Node Component
동작 중인 pod를 유지시키고 쿠버네티스 런타임 환경을 제공하며, 모든 node 상에서 동작한다.

### kubelet
클러스터의 각 node에서 실행되는 에이전트. kubelet은 pod에서 컨테이너가 확실하게 동작하도록 관리
kubelet은 쿠버네티스를 통해 생성되지 않는 컨테이너는 관리하지 않는다.

### kube-proxy
클러스터의 각 node에서 실행되는 네트워크 프록시로, 쿠버네티스의 서비스 개념의 구현부이다.
kube-proxy는 node의 네트워크 규칙을 유지 관리한다. 
이 네트워크 규칙이 내부 네트워크 세션이나 클러스터 바깥에서 pod로 네트워크 통신을 할 수 있도록 해준다.

### 컨테이너 런타임
컨테이너 런타임은 컨테이너 실행을 담당하는 소프트웨어이다.
쿠버네티스는 containerd, CRI-O와 같은 컨테이너 런타임 및 모든 kubernetes CRI 구현체를 지원한다.

### 애드온 
애드온은 쿠버네티스 리소스(데몬셋, 디플로이먼트 등)를 이용하여 클러스터 기능을 구현한다. 이들은 클러스터 단위의 기능을 제공하기 때문에 애드온에 대한 네임스페이스 리소스는 kube-system 네임스페이스에 속한다.

## DNS
여타 애드온들이 절대적으로 요구되지 않지만, 많은 예시에서 필요로 하기 때문에 모든 쿠버네티스 클러스터는 클러스터 DNS를 갖추어야만 한다.

클러스터 DNS는 구성환경 내 다른 DNS 서버와 더불어, 쿠버네티스 서비스를 위해 DNS 레코드를 제공해주는 DNS 서버이다.

